<!-- Glassmorphism Modal Partial -->
<% 
  modal_id = local_assigns[:id] || "modal"
  modal_classes = "glass-modal p-6 max-w-lg w-full mx-4 animate-scale-in"
  modal_classes += " #{local_assigns[:class]}" if local_assigns[:class]
  
  size_classes = {
    sm: "max-w-md",
    md: "max-w-lg",
    lg: "max-w-2xl",
    xl: "max-w-4xl",
    full: "max-w-full"
  }
  modal_classes += " #{size_classes[local_assigns[:size]&.to_sym] || size_classes[:md]}"
%>

<!-- Modal Backdrop -->
<div 
  id="<%= modal_id %>-backdrop"
  class="fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4 animate-fade-in"
  data-controller="modal"
  data-modal-target="backdrop"
  data-action="click->modal#close"
  style="display: none;"
>
  <!-- Modal Content -->
  <div 
    class="<%= modal_classes %>"
    data-modal-target="content"
    data-action="click->modal#stop"
  >
    <!-- Modal Header -->
    <% if local_assigns[:title] || local_assigns[:show_close] != false %>
      <div class="flex items-center justify-between mb-4 pb-4 border-b border-white/20 dark:border-gray-700/30">
        <% if local_assigns[:title] %>
          <h2 class="text-2xl font-bold text-gray-900 dark:text-gray-100 tracking-tight">
            <%= title %>
          </h2>
        <% end %>
        <% if local_assigns[:show_close] != false %>
          <button 
            type="button"
            class="text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors duration-200 hover:scale-110"
            data-action="click->modal#close"
            aria-label="Close modal"
          >
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
            </svg>
          </button>
        <% end %>
      </div>
    <% end %>
    
    <!-- Modal Body -->
    <div class="<%= local_assigns[:body_class] || '' %>">
      <%= yield %>
    </div>
    
    <!-- Modal Footer -->
    <% if local_assigns[:footer] %>
      <div class="mt-6 pt-4 border-t border-white/20 dark:border-gray-700/30 flex justify-end space-x-3">
        <%= footer %>
      </div>
    <% end %>
  </div>
</div>

